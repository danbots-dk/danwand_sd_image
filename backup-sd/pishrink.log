pishrink.sh v0.1.3
pishrink.sh: Copying tmp/sd_card.img to tmp/sd_card_small... ...
pishrink.sh: Gathering data ...
Line 307
beforesize: 7.3G
parted_output: BYT;
/home/peter/sw/wand/danwand_sd_image/backup-sd/tmp/sd_card_small:7818182656B:file:512:512:msdos::;
1:4194304B:272629759B:268435456B:fat32::lba;
2:272629760B:7818182655B:7545552896B:ext4::;
partnum: 2
partstart: 272629760
parttype: primary
tune2fs_output: tune2fs 1.46.5 (30-Dec-2021)
Filesystem volume name:   rootfs
Last mounted on:          /media/peter/rootfs
Filesystem UUID:          cf2895ca-6dc2-4797-8040-f76ba1508f41
Filesystem magic number:  0xEF53
Filesystem revision #:    1 (dynamic)
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file dir_nlink extra_isize metadata_csum
Filesystem flags:         unsigned_directory_hash 
Default mount options:    user_xattr acl
Filesystem state:         clean
Errors behavior:          Continue
Filesystem OS type:       Linux
Inode count:              454176
Block count:              1842176
Reserved block count:     77330
Overhead clusters:        37610
Free blocks:              1443300
Free inodes:              405937
First block:              0
Block size:               4096
Fragment size:            4096
Reserved GDT blocks:      100
Blocks per group:         32768
Fragments per group:      32768
Inodes per group:         7968
Inode blocks per group:   498
Flex block group size:    16
Filesystem created:       Wed May  3 02:25:12 2023
Last mount time:          Thu Sep  7 14:40:04 2023
Last write time:          Thu Sep  7 14:40:04 2023
Mount count:              11
Maximum mount count:      -1
Last checked:             Wed May  3 02:25:12 2023
Check interval:           0 (<none>)
Lifetime writes:          2436 MB
Reserved blocks uid:      0 (user root)
Reserved blocks gid:      0 (group root)
First inode:              11
Inode size:	          256
Required extra isize:     32
Desired extra isize:      32
Journal inode:            8
Default directory hash:   half_md4
Directory Hash Seed:      b318a91f-ad6f-475a-9e27-798978d0414c
Journal backup:           inode blocks
Checksum type:            crc32c
Checksum:                 0x8ffcab98
currentsize: 1842176
blocksize: 4096
Creating new /etc/rc.local
pishrink.sh: Checking filesystem ...
rootfs: 48240/454176 files (0.1% non-contiguous), 398877/1842176 blocks
resize2fs 1.46.5 (30-Dec-2021)
Line 327
currentsize: 1842176
minsize: 515709
Line 335
extra_space: 1326467
Line 342
minsize: 520709
pishrink.sh: Shrinking filesystem ...
resize2fs 1.46.5 (30-Dec-2021)
Resizing the filesystem on /dev/loop24 to 520709 (4k) blocks.
Begin pass 2 (max = 63871)
Relocating blocks             ----------------------------------------XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Begin pass 3 (max = 57)
Scanning inode table          ----------------------------------------XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Begin pass 4 (max = 5136)
Updating inode references     ----------------------------------------XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
The filesystem on /dev/loop24 is now 520709 (4k) blocks long.

Line 361
partnewsize: 2132824064
newpartend: 2405453824
pishrink.sh: Shrinking image ...
Line 386
endresult: 2405454336
pishrink.sh: Using xz on the shrunk image ...
Line 423
aftersize: 493M
pishrink.sh: Shrunk tmp/sd_card_small.xz from 7.3G to 493M ...
